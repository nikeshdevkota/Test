{"info":{"_postman_id":"cef8258c-c86a-4f83-a5ae-bfb6ec28f3dd","name":"2_arrange_api","description":"**Arrange the API and variable, when collection is run through runner then**\n\n**API should login and store access token in variable**\n\n**Update the 3rd user obtained from get user api, and**\n\n**Delete the second user obtained from get user api**","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"1_login","event":[{"listen":"test","script":{"id":"4918474a-e435-4832-9042-653e2038d8ed","exec":["const response = pm.response.json();\r","const token = response.access_token; // Assuming the token is returned in the  response\r","pm.collectionVariables.set(\"apiTestToken\", token);"],"type":"text/javascript","packages":{}}}],"id":"56b465b1-c2fd-4ac8-9461-a25a0160ad1e","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[],"body":{"mode":"raw","raw":"{\r\n  \"email\": \"john@mail.com\",\r\n  \"password\": \"changeme\"\r\n}\r\n","options":{"raw":{"language":"json"}}},"url":{"raw":"{{baseUrl}}{{loginUrl}}","host":["{{baseUrl}}{{loginUrl}}"]},"description":"**API should login and store access token in variable**"},"response":[]},{"name":"2_get_third_user","event":[{"listen":"test","script":{"id":"85b25981-b628-410f-9d7d-b326445ee874","exec":["let users = pm.response.json();\r","thirdUser = users[2];\r","console.log(thirdUser)\r","thirdUserId = thirdUser.id\r","pm.collectionVariables.set(\"thirdUserId\",thirdUserId)\r","thirdUserEmail = thirdUser.email;\r","thirdUserPassword = thirdUser.password;\r","pm.collectionVariables.set(\"thirdUserEmail\", thirdUserEmail);\r","pm.collectionVariables.set(\"thirdUserPassword\", thirdUserPassword);"],"type":"text/javascript","packages":{}}}],"id":"6b89f4c0-1bf4-4ebc-8958-74fafcda96b2","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[],"url":{"raw":"{{baseUrl}}{{allUsersUrl}}","host":["{{baseUrl}}{{allUsersUrl}}"]},"description":"**Obtain 3rd user information from the get api.**"},"response":[]},{"name":"2_third_user_login","event":[{"listen":"prerequest","script":{"id":"f3908e42-f37c-4273-9cc4-e08fb19e3dc3","exec":[""],"type":"text/javascript","packages":{}}},{"listen":"test","script":{"id":"fa1ffb67-8411-425c-84fb-394f25f35395","exec":["const response = pm.response.json();\r","const token = response.access_token; // Assuming the token is returned in the  response\r","pm.collectionVariables.set(\"thirdUserauthToken\", token);"],"type":"text/javascript","packages":{}}}],"id":"baf34fa8-cca9-424a-bf6d-52686827b2bd","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"raw","raw":"{\r\n  \"email\": \"admin@mail.com\",\r\n  \"password\": \"admin123\"\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{baseUrl}}{{loginUrl}}","host":["{{baseUrl}}{{loginUrl}}"]},"description":"**Store the 3rd user access token obtained via login.**"},"response":[]},{"name":"2_update_third_user","event":[{"listen":"prerequest","script":{"id":"86739b7a-2303-4976-9f4b-6d0c8a466c6a","exec":[""],"type":"text/javascript","packages":{}}}],"id":"78c49e20-6aa1-4ce4-89da-c365d5a4e80c","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjMsImlhdCI6MTcxNzUwNTIzOCwiZXhwIjoxNzE5MjMzMjM4fQ.EzQA1FBqdsNXzRDK3VN4GObmXDSboXqJZ3Z7RFIUONk","type":"text"}],"body":{"mode":"raw","raw":"{\r\n  \"name\": \"Nikesh\"\r\n  \r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"https://api.escuelajs.co/api/v1/users/3","protocol":"https","host":["api","escuelajs","co"],"path":["api","v1","users","3"]},"description":"**Update the 3rd user information obtained from get user api.**"},"response":[]},{"name":"3_get_second_user","event":[{"listen":"test","script":{"id":"9d2eef6c-3592-4b93-a5db-4d8b77c86070","exec":["let users = pm.response.json();\r","secondUser = users[2];\r","secondUserId = secondUser.id;\r","secondUserEmail = secondUser.email;\r","secondUserPassword = secondUser.password;\r","pm.collectionVariables.set(\"secondUserId\", secondUserId);\r","pm.collectionVariables.set(\"secondUserEmail\", secondUserEmail);\r","pm.collectionVariables.set(\"secondUserPassword\", secondUserPassword);"],"type":"text/javascript","packages":{}}}],"id":"8a625dc9-ba18-4580-ae06-7592ce7aa6eb","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[],"url":{"raw":"{{baseUrl}}{{allUsersUrl}}","host":["{{baseUrl}}{{allUsersUrl}}"]},"description":"**Store the 2nd user access token obtained via login.**"},"response":[]},{"name":"3_second_user_login","event":[{"listen":"prerequest","script":{"id":"f3908e42-f37c-4273-9cc4-e08fb19e3dc3","exec":[""],"type":"text/javascript","packages":{}}},{"listen":"test","script":{"id":"fa1ffb67-8411-425c-84fb-394f25f35395","exec":["const response = pm.response.json();\r","const token = response.access_token; // Assuming the token is returned in the  response\r","pm.collectionVariables.set(\"secondUserauthToken\", token);"],"type":"text/javascript","packages":{}}}],"id":"bf12b7e9-e7ca-4e8b-80a4-4c38c8632d6f","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"raw","raw":"{\r\n  \"email\": \"{{secondUserEmail}}\",\r\n  \"password\": \"{{secondUserPassword}}\"\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{baseUrl}}{{loginUrl}}","host":["{{baseUrl}}{{loginUrl}}"]},"description":"**Store the 2nd user access token obtained via login.**"},"response":[]},{"name":"3_delete_second_user","id":"b7e26550-762e-484b-b80c-bfb7db3914b8","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"bearer","bearer":[{"key":"token","value":"{{thirdUserauthToken}}","type":"string"}]},"method":"DELETE","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"json"}}},"url":{"raw":"{{baseUrl}}{{allUsersUrl}}/{{secondUserId}}","host":["{{baseUrl}}{{allUsersUrl}}"],"path":["{{secondUserId}}"]},"description":"**Delete the second user obtained from get user api.**"},"response":[]}],"event":[{"listen":"prerequest","script":{"id":"9233df7a-353b-420d-b0a1-165190bfbd1b","type":"text/javascript","packages":{},"exec":[""]}},{"listen":"test","script":{"id":"bc2827bb-1b01-46de-be91-d11d3019a0ad","type":"text/javascript","packages":{},"exec":[""]}}],"variable":[{"id":"60bc4cd4-6ac2-4ee1-aa83-ecbcbbc12cf7","key":"apiTestToken","value":""},{"id":"d0712e57-d81c-4ba5-870d-92d4e858803d","key":"thirdUserId","value":""},{"id":"593d81db-eee4-467a-9b5b-04fda71e90c9","key":"secondUserId","value":""},{"id":"d0756942-3a88-4d21-9be6-bf3e9b170a2b","key":"secondUserEmail","value":""},{"id":"22a84ab1-f4b4-4fe6-aeb4-0d96ac2c4063","key":"secondUserPassword","value":""},{"id":"cf9ff1d2-9d02-47de-8bd2-b168ce505d5e","key":"thirdUserEmail","value":""},{"id":"2954cedc-4113-4416-a82f-dd3656ffaae0","key":"thirdUserPassword","value":""},{"id":"464d16a6-35eb-44a7-83d5-5d2e6352dd14","key":"thirdUserauthToken","value":""},{"id":"f2c2e5df-135e-42fd-b884-4f2ba9a1466f","key":"secondUserauthToken","value":""}]}